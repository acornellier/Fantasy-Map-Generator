{"remainingRequest":"/Users/acornellier/git/Fantasy-Map-Generator/vue/node_modules/babel-loader/lib/index.js!/Users/acornellier/git/Fantasy-Map-Generator/vue/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/acornellier/git/Fantasy-Map-Generator/vue/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/acornellier/git/Fantasy-Map-Generator/vue/src/components/dialogs/TemplateEditor.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/acornellier/git/Fantasy-Map-Generator/vue/src/components/dialogs/TemplateEditor.vue","mtime":1550812459079},{"path":"/Users/acornellier/git/Fantasy-Map-Generator/vue/node_modules/cache-loader/dist/cjs.js","mtime":1550636236327},{"path":"/Users/acornellier/git/Fantasy-Map-Generator/vue/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/acornellier/git/Fantasy-Map-Generator/vue/node_modules/cache-loader/dist/cjs.js","mtime":1550636236327},{"path":"/Users/acornellier/git/Fantasy-Map-Generator/vue/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _Date$now from \"/Users/acornellier/git/Fantasy-Map-Generator/vue/node_modules/@babel/runtime-corejs2/core-js/date/now\";\nimport \"core-js/modules/es6.array.find\";\nimport \"core-js/modules/es6.regexp.replace\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport * as $ from 'jquery';\nexport default {\n  name: 'TemplateEditor',\n  mounted: function mounted() {\n    $('#templateTools > button').on('click', function () {\n      var id = this.id;\n      id = id.replace('template', '');\n\n      if (id === 'Mountain') {\n        var steps = $('#templateBody > div').length;\n        if (steps > 0) return;\n      }\n\n      $('#templateBody').attr('data-changed', 1);\n      $('#templateBody').append('<div data-type=\"' + id + '\">' + id + '</div>');\n      var el = $('#templateBody div:last-child');\n      var count = null;\n      var dist = null;\n\n      if (id === 'Hill' || id === 'Pit' || id === 'Range' || id === 'Trough') {\n        count = '<label>count:<input class=\"templateElCount\" onmouseover=\"tip(\\'Blobs to add\\')\" type=\"number\" value=\"1\" min=\"1\" max=\"99\"></label>';\n      }\n\n      if (id === 'Hill') {\n        dist = '<label>distribution:<input class=\"templateElDist\" onmouseover=\"tip(\\'Set blobs distribution. 0.5 - map center; 0 - any place\\')\" type=\"number\" value=\"0.25\" min=\"0\" max=\"0.5\" step=\"0.01\"></label>';\n      }\n\n      if (id === 'Add' || id === 'Multiply') {\n        dist = '<label>to:' + '<select class=\"templateElDist\" onmouseover=\"tip(\\'Change only land or all cells\\')\">' + '<option value=\"all\" selected>all cells</option>' + '<option value=\"land\">land only</option>' + '<option value=\"interval\">interval</option></select></label>';\n      }\n\n      if (id === 'Add') {\n        count = '<label>value:<input class=\"templateElCount\" onmouseover=\"tip(\\'Add value to height of all cells (negative values are allowed)\\')\" type=\"number\" value=\"-10\" min=\"-100\" max=\"100\" step=\"1\"></label>';\n      }\n\n      if (id === 'Multiply') {\n        count = '<label>by value:<input class=\"templateElCount\" onmouseover=\"tip(\\'Multiply all cells Height by the value\\')\" type=\"number\" value=\"1.1\" min=\"0\" max=\"10\" step=\"0.1\"></label>';\n      }\n\n      if (id === 'Smooth') {\n        count = '<label>fraction:<input class=\"templateElCount\" onmouseover=\"tip(\\'Set smooth fraction. 1 - full smooth, 2 - half-smooth, etc.\\')\" type=\"number\" min=\"1\" max=\"10\" value=\"2\"></label>';\n      }\n\n      if (id === 'Strait') {\n        count = '<label>width:<input class=\"templateElCount\" onmouseover=\"tip(\\'Set strait width\\')\" value=\"1-7\"></label>';\n      }\n\n      el.append('<span onmouseover=\"tip(\\'Remove step\\')\" class=\"icon-trash-empty\"></span>');\n      $('#templateBody .icon-trash-empty').on('click', function () {\n        $(this).parent().remove();\n      });\n      if (dist) el.append(dist);\n      if (count) el.append(count);\n      el.find('select.templateElDist').on('input', this.fireTemplateElDist);\n      $('#templateBody').attr('data-changed', 1);\n    });\n  },\n  methods: {\n    selectTemplate: function selectTemplate(event) {\n      var steps = $('#templateBody > div').length;\n      var changed = +$('#templateBody').attr('data-changed');\n      var template = event.target.value;\n\n      if (steps && changed === 1) {\n        $('#alertMessage').innerHTML = 'Are you sure you want to change the base template? All the changes will be lost.';\n        $('#alert').dialog({\n          resizable: false,\n          title: 'Change Template',\n          buttons: {\n            Change: function Change() {\n              this.changeTemplate(template);\n              $(this).dialog('close');\n            },\n            Cancel: function Cancel() {\n              var prev = $('#templateSelect').attr('data-prev');\n              $('#templateSelect').val(prev);\n              $(this).dialog('close');\n            }\n          }\n        });\n      }\n\n      if (steps === 0 || changed === 0) this.changeTemplate(template);\n    },\n    save: function save() {\n      var steps = $('#templateBody > div').length;\n      var stepsData = '';\n\n      for (var step = 1; step <= steps; step++) {\n        var element = $('#templateBody div:nth-child(' + step + ')');\n        var type = element.attr('data-type');\n        var count = $('#templateBody div:nth-child(' + step + ') .templateElCount').val();\n        var dist = $('#templateBody div:nth-child(' + step + ') .templateElDist').val();\n\n        if (!count) {\n          count = '0';\n        }\n\n        if (!dist) {\n          dist = '0';\n        }\n\n        stepsData += type + ' ' + count + ' ' + dist + '\\r\\n';\n      }\n\n      var dataBlob = new Blob([stepsData], {\n        type: 'text/plain'\n      });\n      var url = window.URL.createObjectURL(dataBlob);\n      var link = document.createElement('a');\n      link.download = 'template_' + _Date$now() + '.txt';\n      link.href = url;\n      link.click();\n      $('#templateBody').attr('data-changed', 0);\n    },\n    load: function load() {\n      $('#templateToLoad').click();\n    },\n    fireTemplateElDist: function fireTemplateElDist() {\n      if (this.value === 'interval') {\n        var interval = prompt('Populate a height interval (e.g. from 17 to 20), without space, but with hyphen', '17-20');\n\n        if (interval) {\n          var option = '<option value=\"' + interval + '\">' + interval + '</option>';\n          $(this).append(option).val(interval);\n        }\n      }\n    },\n    changeTemplate: function changeTemplate(template) {\n      $('#templateBody').empty();\n      $('#templateSelect').attr('data-prev', template);\n\n      if (template === 'templateVolcano') {\n        this.addStep('Mountain');\n        this.addStep('Add', 10);\n        this.addStep('Hill', 5, 0.35);\n        this.addStep('Range', 3);\n        this.addStep('Trough', -4);\n      }\n\n      if (template === 'templateHighIsland') {\n        this.addStep('Mountain');\n        this.addStep('Add', 10);\n        this.addStep('Range', 6);\n        this.addStep('Hill', 12, 0.25);\n        this.addStep('Trough', 3);\n        this.addStep('Multiply', 0.75, 'land');\n        this.addStep('Pit', 1);\n        this.addStep('Hill', 3, 0.15);\n      }\n\n      if (template === 'templateLowIsland') {\n        this.addStep('Mountain');\n        this.addStep('Add', 10);\n        this.addStep('Smooth', 2);\n        this.addStep('Range', 2);\n        this.addStep('Hill', 4, 0.4);\n        this.addStep('Hill', 12, 0.2);\n        this.addStep('Trough', 8);\n        this.addStep('Multiply', 0.35, 'land');\n      }\n\n      if (template === 'templateContinents') {\n        this.addStep('Mountain');\n        this.addStep('Add', 10);\n        this.addStep('Hill', 30, 0.25);\n        this.addStep('Strait', '4-7');\n        this.addStep('Pit', 10);\n        this.addStep('Trough', 10);\n        this.addStep('Multiply', 0.6, 'land');\n        this.addStep('Smooth', 2);\n        this.addStep('Range', 3);\n      }\n\n      if (template === 'templateArchipelago') {\n        this.addStep('Mountain');\n        this.addStep('Add', 10);\n        this.addStep('Hill', 12, 0.15);\n        this.addStep('Range', 8);\n        this.addStep('Strait', '2-3');\n        this.addStep('Trough', 15);\n        this.addStep('Pit', 10);\n        this.addStep('Add', -5, 'land');\n        this.addStep('Multiply', 0.7, 'land');\n        this.addStep('Smooth', 3);\n      }\n\n      if (template === 'templateAtoll') {\n        this.addStep('Mountain');\n        this.addStep('Add', 10, 'all');\n        this.addStep('Hill', 2, 0.35);\n        this.addStep('Range', 2);\n        this.addStep('Smooth', 1);\n        this.addStep('Multiply', 0.1, '27-100');\n      }\n\n      if (template === 'templateMainland') {\n        this.addStep('Mountain');\n        this.addStep('Add', 10, 'all');\n        this.addStep('Hill', 30, 0.2);\n        this.addStep('Range', 10);\n        this.addStep('Pit', 20);\n        this.addStep('Hill', 10, 0.15);\n        this.addStep('Trough', 10);\n        this.addStep('Multiply', 0.4, 'land');\n        this.addStep('Range', 10);\n        this.addStep('Smooth', 3);\n      }\n\n      if (template === 'templatePeninsulas') {\n        this.addStep('Add', 15);\n        this.addStep('Hill', 30, 0);\n        this.addStep('Range', 5);\n        this.addStep('Pit', 15);\n        this.addStep('Strait', '15-20');\n      }\n\n      $('#templateBody').attr('data-changed', 0);\n    },\n    addStep: function addStep(feature, count, dist) {\n      if (!feature) return;\n      if (feature === 'Mountain') $('#templateMountain').click();\n      if (feature === 'Hill') $('#templateHill').click();\n      if (feature === 'Pit') $('#templatePit').click();\n      if (feature === 'Range') $('#templateRange').click();\n      if (feature === 'Trough') $('#templateTrough').click();\n      if (feature === 'Strait') $('#templateStrait').click();\n      if (feature === 'Add') $('#templateAdd').click();\n      if (feature === 'Multiply') $('#templateMultiply').click();\n      if (feature === 'Smooth') $('#templateSmooth').click();\n\n      if (count) {\n        $('#templateBody div:last-child .templateElCount').val(count);\n      }\n\n      if (dist !== undefined) {\n        if (dist !== 'land') {\n          var option = '<option value=\"' + dist + '\">' + dist + '</option>';\n          $('#templateBody div:last-child .templateElDist').append(option);\n        }\n\n        $('#templateBody div:last-child .templateElDist').val(dist);\n      }\n    }\n  }\n};",{"version":3,"sources":["TemplateEditor.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n<div id=\"templateEditor\" class=\"dialog stable\" style=\"display: none\">\n  <div id=\"templateTop\">\n    Base template:\n    <select id=\"templateSelect\" data-prev=\"templateCustom\" onmouseover=\"tip('Select base template')\"\n            @input=\"selectTemplate($event)\">\n      <option value=\"templateCustom\" selected>Custom</option>\n      <option value=\"templateVolcano\">Volcano</option>\n      <option value=\"templateHighIsland\">High Island</option>\n      <option value=\"templateLowIsland\">Low Island</option>\n      <option value=\"templateContinents\">Continents</option>\n      <option value=\"templateArchipelago\">Archipelago</option>\n      <option value=\"templateAtoll\">Atoll</option>\n      <option value=\"templateMainland\">Mainland</option>\n      <option value=\"templatePeninsulas\">Peninsulas</option>\n    </select>\n  </div>\n  <div id=\"templateTools\">\n    <button id=\"templateMountain\"\n            onmouseover=\"tip('Mountain: high big blob. Can be placed only once and only as a first step')\"\n            class=\"noicon\">M\n    </button>\n    <button id=\"templateHill\" onmouseover=\"tip('Hill: small blob')\" class=\"noicon\">H</button>\n    <button id=\"templatePit\" onmouseover=\"tip('Pit: round depression')\" class=\"noicon\">P\n    </button>\n    <button id=\"templateRange\" onmouseover=\"tip('Range: elongated elevation')\" class=\"noicon\">\n      R\n    </button>\n    <button id=\"templateTrough\" onmouseover=\"tip('Trough: elongated depression')\"\n            class=\"noicon\">T\n    </button>\n    <button id=\"templateStrait\" onmouseover=\"tip('Strait: centered vertical depression')\"\n            class=\"noicon\">S\n    </button>\n    <button id=\"templateAdd\" onmouseover=\"tip('Add or subtract value from all heights')\"\n            class=\"noicon\">+\n    </button>\n    <button id=\"templateMultiply\" onmouseover=\"tip('Multiply all heights by factor')\"\n            class=\"noicon\">*\n    </button>\n    <button id=\"templateSmooth\"\n            onmouseover=\"tip('Smooth the map replacing cell heights by an average values of its neighbors')\"\n            class=\"noicon\">~\n    </button>\n  </div>\n  <div id=\"templateBody\" data-changed=0>\n    <div data-type=\"Mountain\">Mountain\n      <span onmouseover=\"tip('Remove step')\" class=\"icon-trash-empty\"\n            onclick=\"this.parentNode.parentNode.removeChild(this.parentNode)\"></span>\n    </div>\n  </div>\n  <div id=\"templateBottom\">\n    <button id=\"templateRun\" onmouseover=\"tip('Apply current template')\"\n            class=\"icon-play-circled2\"></button>\n    <button id=\"templateUndo\" onmouseover=\"tip('Undo the latest action')\" class=\"icon-ccw\"\n            disabled></button>\n    <button id=\"templateRedo\" onmouseover=\"tip('Redo the action')\" class=\"icon-cw\"\n            disabled></button>\n    <button id=\"templateComplete\"\n            onmouseover=\"tip('Finalize the Heightmap. Not allowed if insufficient land area available')\"\n            class=\"icon-check\"></button>\n    <button id=\"templateSave\" onmouseover=\"tip('Save template')\" class=\"icon-download\"\n            @click=\"save\"></button>\n    <button id=\"templateLoad\" onmouseover=\"tip('Open previously saved template')\"\n            class=\"icon-upload\"></button>\n    <button id=\"templateMail\"\n            onclick=\"window.open('mailto:maxganiev@yandex.com?Subject=Template%20suggestion', '_blank')\"\n            onmouseover=\"tip('Send a template suggestion to me')\"\n            class=\"icon-mail-alt\"></button>\n  </div>\n</div>\n</template>\n<script>\nimport * as $ from 'jquery'\n\nexport default {\n  name: 'TemplateEditor',\n  mounted() {\n    $('#templateTools > button').on('click', function() {\n      let id = this.id\n      id = id.replace('template', '')\n      if (id === 'Mountain') {\n        const steps = $('#templateBody > div').length\n        if (steps > 0) return\n      }\n      $('#templateBody').attr('data-changed', 1)\n      $('#templateBody').append('<div data-type=\"' + id + '\">' + id + '</div>')\n      const el = $('#templateBody div:last-child')\n      let count = null\n      let dist = null\n      if (id === 'Hill' || id === 'Pit' || id === 'Range' || id === 'Trough') {\n        count = '<label>count:<input class=\"templateElCount\" onmouseover=\"tip(\\'Blobs to add\\')\" type=\"number\" value=\"1\" min=\"1\" max=\"99\"></label>'\n      }\n      if (id === 'Hill') {\n        dist = '<label>distribution:<input class=\"templateElDist\" onmouseover=\"tip(\\'Set blobs distribution. 0.5 - map center; 0 - any place\\')\" type=\"number\" value=\"0.25\" min=\"0\" max=\"0.5\" step=\"0.01\"></label>'\n      }\n      if (id === 'Add' || id === 'Multiply') {\n        dist = '<label>to:' +\n                   '<select class=\"templateElDist\" onmouseover=\"tip(\\'Change only land or all cells\\')\">' +\n                   '<option value=\"all\" selected>all cells</option>' +\n                   '<option value=\"land\">land only</option>' +\n                   '<option value=\"interval\">interval</option></select></label>'\n      }\n      if (id === 'Add') {\n        count = '<label>value:<input class=\"templateElCount\" onmouseover=\"tip(\\'Add value to height of all cells (negative values are allowed)\\')\" type=\"number\" value=\"-10\" min=\"-100\" max=\"100\" step=\"1\"></label>'\n      }\n      if (id === 'Multiply') {\n        count = '<label>by value:<input class=\"templateElCount\" onmouseover=\"tip(\\'Multiply all cells Height by the value\\')\" type=\"number\" value=\"1.1\" min=\"0\" max=\"10\" step=\"0.1\"></label>'\n      }\n      if (id === 'Smooth') {\n        count = '<label>fraction:<input class=\"templateElCount\" onmouseover=\"tip(\\'Set smooth fraction. 1 - full smooth, 2 - half-smooth, etc.\\')\" type=\"number\" min=\"1\" max=\"10\" value=\"2\"></label>'\n      }\n      if (id === 'Strait') {\n        count = '<label>width:<input class=\"templateElCount\" onmouseover=\"tip(\\'Set strait width\\')\" value=\"1-7\"></label>'\n      }\n      el.append('<span onmouseover=\"tip(\\'Remove step\\')\" class=\"icon-trash-empty\"></span>')\n      $('#templateBody .icon-trash-empty').on('click', function() {$(this).parent().remove()})\n      if (dist) el.append(dist)\n      if (count) el.append(count)\n      el.find('select.templateElDist').on('input', this.fireTemplateElDist)\n      $('#templateBody').attr('data-changed', 1)\n    })\n  },\n  methods: {\n    selectTemplate(event) {\n      const steps = $('#templateBody > div').length\n      const changed = +$('#templateBody').attr('data-changed')\n      const template = event.target.value\n      if (steps && changed === 1) {\n        $('#alertMessage').innerHTML =\n          'Are you sure you want to change the base template? All the changes will be lost.'\n        $('#alert').dialog({\n          resizable: false, title: 'Change Template',\n          buttons: {\n            Change: function() {\n              this.changeTemplate(template)\n              $(this).dialog('close')\n            },\n            Cancel: function() {\n              const prev = $('#templateSelect').attr('data-prev')\n              $('#templateSelect').val(prev)\n              $(this).dialog('close')\n            }\n          }\n        })\n      }\n      if (steps === 0 || changed === 0) this.changeTemplate(template)\n    },\n    save() {\n      const steps = $('#templateBody > div').length\n      let stepsData = ''\n      for (let step = 1; step <= steps; step++) {\n        const element = $('#templateBody div:nth-child(' + step + ')')\n        const type = element.attr('data-type')\n        let count = $('#templateBody div:nth-child(' + step + ') .templateElCount').val()\n        let dist = $('#templateBody div:nth-child(' + step + ') .templateElDist').val()\n        if (!count) {count = '0'}\n        if (!dist) {dist = '0'}\n        stepsData += type + ' ' + count + ' ' + dist + '\\r\\n'\n      }\n      const dataBlob = new Blob([stepsData], {type: 'text/plain'})\n      const url = window.URL.createObjectURL(dataBlob)\n      const link = document.createElement('a')\n      link.download = 'template_' + Date.now() + '.txt'\n      link.href = url\n      link.click()\n      $('#templateBody').attr('data-changed', 0)\n    },\n    load() {\n      $('#templateToLoad').click()\n    },\n    fireTemplateElDist() {\n      if (this.value === 'interval') {\n        const interval = prompt(\n          'Populate a height interval (e.g. from 17 to 20), without space, but with hyphen',\n          '17-20')\n        if (interval) {\n          const option = '<option value=\"' + interval + '\">' + interval + '</option>'\n          $(this).append(option).val(interval)\n        }\n      }\n    },\n    changeTemplate(template) {\n      $('#templateBody').empty()\n      $('#templateSelect').attr('data-prev', template)\n      if (template === 'templateVolcano') {\n        this.addStep('Mountain')\n        this.addStep('Add', 10)\n        this.addStep('Hill', 5, 0.35)\n        this.addStep('Range', 3)\n        this.addStep('Trough', -4)\n      }\n      if (template === 'templateHighIsland') {\n        this.addStep('Mountain')\n        this.addStep('Add', 10)\n        this.addStep('Range', 6)\n        this.addStep('Hill', 12, 0.25)\n        this.addStep('Trough', 3)\n        this.addStep('Multiply', 0.75, 'land')\n        this.addStep('Pit', 1)\n        this.addStep('Hill', 3, 0.15)\n      }\n      if (template === 'templateLowIsland') {\n        this.addStep('Mountain')\n        this.addStep('Add', 10)\n        this.addStep('Smooth', 2)\n        this.addStep('Range', 2)\n        this.addStep('Hill', 4, 0.4)\n        this.addStep('Hill', 12, 0.2)\n        this.addStep('Trough', 8)\n        this.addStep('Multiply', 0.35, 'land')\n      }\n      if (template === 'templateContinents') {\n        this.addStep('Mountain')\n        this.addStep('Add', 10)\n        this.addStep('Hill', 30, 0.25)\n        this.addStep('Strait', '4-7')\n        this.addStep('Pit', 10)\n        this.addStep('Trough', 10)\n        this.addStep('Multiply', 0.6, 'land')\n        this.addStep('Smooth', 2)\n        this.addStep('Range', 3)\n      }\n      if (template === 'templateArchipelago') {\n        this.addStep('Mountain')\n        this.addStep('Add', 10)\n        this.addStep('Hill', 12, 0.15)\n        this.addStep('Range', 8)\n        this.addStep('Strait', '2-3')\n        this.addStep('Trough', 15)\n        this.addStep('Pit', 10)\n        this.addStep('Add', -5, 'land')\n        this.addStep('Multiply', 0.7, 'land')\n        this.addStep('Smooth', 3)\n      }\n      if (template === 'templateAtoll') {\n        this.addStep('Mountain')\n        this.addStep('Add', 10, 'all')\n        this.addStep('Hill', 2, 0.35)\n        this.addStep('Range', 2)\n        this.addStep('Smooth', 1)\n        this.addStep('Multiply', 0.1, '27-100')\n      }\n      if (template === 'templateMainland') {\n        this.addStep('Mountain')\n        this.addStep('Add', 10, 'all')\n        this.addStep('Hill', 30, 0.2)\n        this.addStep('Range', 10)\n        this.addStep('Pit', 20)\n        this.addStep('Hill', 10, 0.15)\n        this.addStep('Trough', 10)\n        this.addStep('Multiply', 0.4, 'land')\n        this.addStep('Range', 10)\n        this.addStep('Smooth', 3)\n      }\n      if (template === 'templatePeninsulas') {\n        this.addStep('Add', 15)\n        this.addStep('Hill', 30, 0)\n        this.addStep('Range', 5)\n        this.addStep('Pit', 15)\n        this.addStep('Strait', '15-20')\n      }\n      $('#templateBody').attr('data-changed', 0)\n    },\n    addStep(feature, count, dist) {\n      if (!feature) return\n      if (feature === 'Mountain') $('#templateMountain').click()\n      if (feature === 'Hill') $('#templateHill').click()\n      if (feature === 'Pit') $('#templatePit').click()\n      if (feature === 'Range') $('#templateRange').click()\n      if (feature === 'Trough') $('#templateTrough').click()\n      if (feature === 'Strait') $('#templateStrait').click()\n      if (feature === 'Add') $('#templateAdd').click()\n      if (feature === 'Multiply') $('#templateMultiply').click()\n      if (feature === 'Smooth') $('#templateSmooth').click()\n      if (count) {$('#templateBody div:last-child .templateElCount').val(count)}\n      if (dist !== undefined) {\n        if (dist !== 'land') {\n          const option = '<option value=\"' + dist + '\">' + dist + '</option>'\n          $('#templateBody div:last-child .templateElDist').append(option)\n        }\n        $('#templateBody div:last-child .templateElDist').val(dist)\n      }\n    }\n  }\n}\n</script>"],"sourceRoot":"src/components/dialogs"}]}